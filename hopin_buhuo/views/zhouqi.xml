<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
        <!-- tree视图 -->
        <record id="view_tree_buhuo_zhouqi" model="ir.ui.view">
          <field name="name">补货周期</field>
          <field name="model">stock.warehouse</field>
          <field name="arch" type="xml">
            <tree colors="blue:buhuo_jiange==buhuo_zhouqi; red:buhuo_jiange &gt; buhuo_zhouqi">
              <field name="code" string="货架编号"/>
              <field name="buhuo_zhouqi" />
              <field name="buhuo_jiange" />
              <field name="buhuo_riqi" />
              <field name="partner_id" string="货架地址"/>
            </tree>
          </field>
        </record>

        <!-- 默认过滤，只显示货架 -->
        <record model="ir.ui.view" id="buhuo_zhouqi_search_view">
            <field name="name">补货周期查询</field>
            <field name="model">stock.warehouse</field>
            <field name="arch" type="xml">
                <search>
                    <field name="code"/>
                    <!--<filter name="huojia" string="货架"-->
                            <!--domain="[('code', 'like', 'Q%')]"/>-->
                    <group string="分组">
                        <filter name="zhouqi" string="补货周期分组"
                            domain="[('code', 'like', 'Q%')]"
                            context="{'group_by': 'buhuo_zhouqi'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- 视图动作 -->
        <record model="ir.actions.act_window" id="action_buhuo_zhouqi">
            <field name="name">补货周期查询</field>
            <field name="res_model">stock.warehouse</field>
            <field name="view_mode">tree,form</field>
            <field name="context" eval="{'search_default_zhouqi': 1}"/>
            <field name="domain">[["buhuo_qiyong","=",True]]</field>
            <!--<field name="views">[[view_tree_buhuo_canshu,"tree"],[view_form_buhuo_canshu,"form"]]</field>-->
            <!--<field name="view_id" ref="view_tree_buhuo_canshu"/>-->
        </record>

        <record model="ir.actions.act_window.view" id="action_buhuo_zhouqi_tree">
            <field name="act_window_id" ref="action_buhuo_zhouqi"/>
            <field name="sequence" eval="0"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_tree_buhuo_zhouqi"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_buhuo_zhouqi_form">
            <field name="act_window_id" ref="action_buhuo_zhouqi"/>
            <field name="sequence" eval="1"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_form_buhuo_canshu"/>
        </record>

        <!-- 二级菜单 -->
        <menuitem name="补货周期查询" id="menu_buhuo_zhouqi" parent="menu_buhuo_yujing"
                  action="action_buhuo_zhouqi" sequence="10"/>

    </data>
</openerp>